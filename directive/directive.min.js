!function(n,e){"use strict";n.module("app").directive("spork",["$rootScope","$compile","UtilityService",function t(i,o,r){var c=function(n,e,t){window.console.log(e);var i="";return i+="<li>",i+='<div id="node-'+e.id+'">',i+='<div class="node" ng-include="\''+n+"'\"></div>",t&&(i+='<div class="line" ng-style="connector('+e.id+", "+t.id+')"></div>'),i+="</div>",i+=l(n,e),i+="</li>"},l=function(n,t,i){var o="";return(t.children||i)&&(o+="<ul>",i?o+=c(n,t):e.each(t.children,function(e){o+=c(n,e,t)}),o+="</ul>"),o},d=function(n,t){var i="";return e.each(n,function(n){i+=l(t,n,!0)}),i};return{restrict:"E",replace:!0,scope:{config:"=?",model:"=",templateUrl:"@"},controller:["$scope",function a(e){var t=this;this.defaultConfig={},e.config=$.extend(!0,n.copy(t.defaultConfig),e.config)}],template:'<div class="spork"></div>',link:function u(e,t){e.connector=function c(e,t){if(t!==!1){e=n.element("#node-"+e),t=n.element("#node-"+t);var i=r.getMetrics(e[0],t[0],!0);return{width:Math.round(i.lineLength)+"px",transform:"translateY(-50%) rotate("+Math.round(i.angleDegrees)+"deg)"}}};var i=function(i){if(i){var r=d(i,e.templateUrl);t.append(n.element(r));var c=o(t);c(e)}};e.$watch("model",function(n){i(n)})}}}])}(window.angular,window._);