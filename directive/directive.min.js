!function(i,n){"use strict";i.module("app").directive("spork",["$window",function e(n){var e=function(i,n,e,l){var t=l-n,d=e-i;return 180*Math.atan2(t,d)/Math.PI},l=function(i){var n={};return i&&(n={t:Math.floor(i.getBoundingClientRect().top),r:Math.floor(i.getBoundingClientRect().right),b:Math.floor(i.getBoundingClientRect().bottom),l:Math.floor(i.getBoundingClientRect().left),w:Math.floor(i.clientWidth),h:Math.floor(i.clientHeight)},n.cx=n.l+n.h/2,n.cy=n.t+n.w/2),n};return{restrict:"E",replace:!0,scope:{config:"=?",model:"="},controller:["$scope",function t(i){i.lineLength=function n(i,e){i=$("#node-"+i),e=$("#node-"+e);var t=l(i[0]),d=l(e[0]),a={x:t.cx,y:t.cy},o={x:d.cx,y:d.cy},c=Math.atan2(o.y-a.y,o.x-a.x),r=180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI;r+=180;var s=Math.sqrt((a.x-=o.x)*a.x+(a.y-=o.y)*a.y);return window.console.log(s,r),{width:s+"px",transform:"translateY(-50%) rotate("+r+"deg)"}}}],template:'<div class="spork {{config.style}}"><ul><li ng-repeat="a in model"><div id="node-{{a.id}}"><div class="node"><span class="label">{{a.id}}</span></div></div><ul ng-if="a.children.length"><li ng-repeat="b in a.children"><div id="node-{{b.id}}"><div class="node"><span class="label">{{b.id}}</span></div><div class="line" ng-style="lineLength(b.id, a.id)"></div></div><ul ng-if="b.children.length"><li ng-repeat="c in b.children"><div id="node-{{c.id}}"><div class="node"><span class="label">{{c.id}}</span></div><div class="line" ng-style="lineLength(c.id, b.id)"></div></div><ul ng-if="c.children.length"><li ng-repeat="d in c.children"><div id="node-{{d.id}}"><div class="node"><span class="label">{{d.id}}</span></div><div class="line" ng-style="lineLength(d.id, c.id)"></div></div></li></ul></li></ul></li></ul></li></ul></div>',link:function d(n,e){var l={};n.config=$.extend(!0,i.copy(l),n.config)}}}])}(window.angular,window._);