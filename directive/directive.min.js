!function(e,n){"use strict";angular.module("app").directive("spork",["UtilityService",function i(n){return{restrict:"E",replace:!0,transclude:!0,scope:{model:"=",config:"=?"},template:'<div class="spork"><spork-ul model="model" config="config"></spork-ul><ng-transclude></ng-transclude></div>',link:function i(n,o){var t={};n.config=$.extend(!0,e.copy(t),n.config)}}}]).directive("sporkUl",["UtilityService",function o(e){return{restrict:"E",replace:!0,scope:{model:"=",parent:"=?",config:"="},template:'<ul><spork-li ng-repeat="node in model" node="node" parent="parent" config="config"></spork-li></ul>'}}]).directive("sporkLi",["$compile","UtilityService",function t(i,o){return{restrict:"E",replace:!0,scope:{node:"=",parent:"=?",config:"="},controller:function(i){i.doClick=function(e){i.$emit("spork:node:click",e)},i.connector=function t(i,r){if(!n.isUndefined(r)){i=e.element("#node-"+i.id),r=e.element("#node-"+r.id);var c=o.getMetrics(i[0],r[0],!0);return{width:Math.round(c.lineLength)+"px",transform:"translateY(-50%) rotate("+Math.round(c.angleDegrees)+"deg)"}}}},template:'<li><div id="node-{{node.id}}" ng-click="doClick(node)"><div class="node" ng-include="config.templateUrl"></div><div class="node-line" ng-style="connector(node, parent)"></div></div></li>',link:function(n,o){var t='<spork-ul model="node.children" parent="node" config="config"></spork-ul>',r=function(){e.isArray(n.node.children)&&i(t)(n,function(e,n){o.append(e)})};r(),n.$watch("node.children",function(e,n){e!==n&&r()})}}}])}(window.angular,window._);