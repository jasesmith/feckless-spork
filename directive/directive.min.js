!function(e,n){"use strict";angular.module("app").directive("spork",["UtilityService",function o(n){return{restrict:"E",replace:!0,transclude:!0,scope:{model:"=",config:"=?"},controller:function(e){e.doEnter=function(){e.$emit("spork:mouseenter")},e.doLeave=function(){e.$emit("spork:mouseleave")}},template:'<div class="spork" ng-mouseleave="doLeave()" ng-mouseenter="doEnter()"><spork-ul model="model" config="config"></spork-ul><ng-transclude></ng-transclude></div>',link:function o(n,i){var t={};n.config=$.extend(!0,e.copy(t),n.config)}}}]).directive("sporkUl",["UtilityService",function i(e){return{restrict:"E",replace:!0,scope:{model:"=",parent:"=?",config:"="},template:'<ul><spork-li ng-repeat="node in model" node="node" parent="parent" config="config"></spork-li></ul>'}}]).directive("sporkLi",["$compile","UtilityService",function t(o,i){return{restrict:"E",replace:!0,scope:{node:"=",parent:"=?",config:"="},controller:function(o){o.doClick=function(e){o.$emit("spork:node:click",e)},o.doEnter=function(e){o.$emit("spork:node:mouseenter",e)},o.doLeave=function(e){o.$emit("spork:node:mouseleave",e)},o.connector=function t(o,r){if(!n.isUndefined(r)){o=e.element("#node-"+o.id),r=e.element("#node-"+r.id);var d=i.getMetrics(o[0],r[0],!0);return{width:Math.round(d.lineLength)+"px",transform:"translateY(-50%) rotate("+Math.round(d.angleDegrees)+"deg)"}}}},template:'<li><div id="node-{{node.id}}" ng-mouseleave="doLeave(node)" ng-mouseenter="doEnter(node)" ng-click="doClick(node)"><div class="node {{node.type}}" ng-include="config.templateUrl"></div><div class="node-line {{node.line}}" ng-style="connector(node, parent)"></div></div></li>',link:function(n,i){var t='<spork-ul model="node.children" parent="node" config="config"></spork-ul>',r=function(){e.isArray(n.node.children)&&o(t)(n,function(e,n){i.append(e)})};r(),n.$watch("node.children",function(e,n){e!==n&&r()})}}}])}(window.angular,window._);