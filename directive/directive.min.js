!function(n,i){"use strict";n.module("app").directive("spork",["$window",function e(i){var e=function(n){var i={};return n&&(i={t:Math.floor(n.getBoundingClientRect().top),r:Math.floor(n.getBoundingClientRect().right),b:Math.floor(n.getBoundingClientRect().bottom),l:Math.floor(n.getBoundingClientRect().left),w:Math.floor(n.clientWidth),h:Math.floor(n.clientHeight)},i.cx=i.l+i.h/2,i.cy=i.t+i.w/2),i},l=function(n,i,l){l=l||!1;var d=e(n),t=e(i),a={x:d.cx,y:d.cy},c={x:t.cx,y:t.cy},o=Math.atan2(c.y-a.y,c.x-a.x),r=180*o/Math.PI;l&&(r+=180);var s=Math.sqrt((a.x-=c.x)*a.x+(a.y-=c.y)*a.y);return{lineLength:s,angleRadians:o,angleDegrees:r}};return{restrict:"E",replace:!0,scope:{config:"=?",model:"="},controller:["$scope",function d(i){i.connector=function e(i,d){i=n.element("#node-"+i)[0],d=n.element("#node-"+d)[0];var t=l(i,d,!0);return{width:t.lineLength+"px",transform:"translateY(-50%) rotate("+t.angleDegrees+"deg)"}}}],template:'<div class="spork"><ul><li ng-repeat="a in model"><div id="node-{{a.id}}"><div class="node"><span class="label">{{a.id}}</span></div></div><ul ng-if="a.children.length"><li ng-repeat="b in a.children"><div id="node-{{b.id}}"><div class="node"><span class="label">{{b.id}}</span></div><div class="line" ng-style="connector(b.id, a.id)"></div></div><ul ng-if="b.children.length"><li ng-repeat="c in b.children"><div id="node-{{c.id}}"><div class="node"><span class="label">{{c.id}}</span></div><div class="line" ng-style="connector(c.id, b.id)"></div></div><ul ng-if="c.children.length"><li ng-repeat="d in c.children"><div id="node-{{d.id}}"><div class="node"><span class="label">{{d.id}}</span></div><div class="line" ng-style="connector(d.id, c.id)"></div></div></li></ul></li></ul></li></ul></li></ul></div>',link:function t(i,e){var l={};i.config=$.extend(!0,n.copy(l),i.config)}}}])}(window.angular,window._);